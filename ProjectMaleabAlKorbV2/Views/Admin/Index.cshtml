@model ProjectMaleabAlKorbV2.Models.Contact
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_AdminPage.cshtml";
}

<div class="main-page">
    <div class="col_4">
        <div class="col-md-4 widget widget1">
            <div class="r3_counter_box">
                <i class="pull-left fa fa-laptop user2 icon-rounded"></i>
                <div class="stats">
                    <h5><strong>1</strong></h5>
                    <span>Active User</span>
                </div>
            </div>
        </div>

        <div class="col-md-3 widget widget1">
            <div class="r3_counter_box">
                <i class="pull-left fa fa-money user2 icon-rounded"></i>
                <div class="stats" id="cntPlayer">
                    
                    <span>Number of Player</span>
                </div>
            </div>
        </div>
        <div class="col-md-3 widget widget1">
            <div class="r3_counter_box">
                <i class="pull-left fa fa-pie-chart dollar1 icon-rounded"></i>
                <div class="stats" id="cntContact">
                    
                    <span>Number of Contact</span>
                </div>
            </div>
        </div>
        <div class="col-md-3 widget">
            <div class="r3_counter_box">
                <i class="pull-left fa fa-users dollar2 icon-rounded"></i>
                <div class="stats" id="cntStadium">
                    
                    <span>Number of Stadium</span>
                </div>
            </div>
        </div>
        <div class="clearfix"> </div>
    </div>

    <div class="row-one widgettable">
        <div class="col-md-7 content-top-2 card">


            <div class="panel panel-primary">
                <div class="panel-heading">
                    Recent Registrations
                </div>
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>Player ID</th>
                                    <th>Names</th>
                                    <th>Email</th>
                                    <th>Passwords</th>
                                    <th>Phone</th>
                                </tr>
                            </thead>
                            <tbody id="SetPlayerList"></tbody>
                        </table>
                        <div class="text-right">
                            <a href="@Url.Action("Registers","Admin")">More Tasks <i class="fa fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>


        </div>
        <div class="col-md-3 stat">
            <div class="content-top-1">
                <div class="col-md-6 top-content">
                    <h5>Number Visit</h5>
                    <label>1283+</label>
                </div>
                <div class="col-md-6 top-content1">
                    <div id="demo-pie-1" class="pie-title-center" data-percent="45">
                        <span class="pie-value"></span>
                    </div>
                </div>
                <div class="clearfix"> </div>
            </div>
            <div class="content-top-1">
                <div class="col-md-6 top-content">
                    <h5>Reviews</h5>
                    <label>2262+</label>
                </div>
                <div class="col-md-6 top-content1">
                    <div id="demo-pie-2" class="pie-title-center" data-percent="75">
                        <span class="pie-value"></span>
                    </div>
                </div>
                <div class="clearfix"> </div>
            </div>
            <div class="content-top-1">
                <div class="col-md-6 top-content">
                    <h5>Visitors</h5>
                    <label>12589+</label>
                </div>
                <div class="col-md-6 top-content1">
                    <div id="demo-pie-3" class="pie-title-center" data-percent="90">
                        <span class="pie-value"></span>
                    </div>
                </div>
                <div class="clearfix"> </div>
            </div>
        </div>
        <div class="col-md-2 stat">
            <div class="content-top">
                <div class="top-content facebook">
                    <a href="#"><i class="fa fa-facebook"></i></a>
                </div>
                <ul class="info">
                    <li class="col-md-6">
                        <b>1,296</b>
                        <p>Friends</p>
                    </li>
                    <li class="col-md-6">
                        <b>647</b>
                        <p>Likes</p>
                    </li>
                    <div class="clearfix"></div>
                </ul>
            </div>
            <div class="content-top">
                <div class="top-content twitter">
                    <a href="#"><i class="fa fa-twitter"></i></a>
                </div>
                <ul class="info">
                    <li class="col-md-6">
                        <b>1,997</b>
                        <p>Followers</p>
                    </li>
                    <li class="col-md-6">
                        <b>389</b>
                        <p>Tweets</p>
                    </li>
                    <div class="clearfix"></div>
                </ul>
            </div>
            <div class="content-top">
                <div class="top-content google-plus">
                    <a href="#"><i class="fa fa-google-plus"></i></a>
                </div>
                <ul class="info">
                    <li class="col-md-6">
                        <b>1,216</b>
                        <p>Followers</p>
                    </li>
                    <li class="col-md-6">
                        <b>321</b>
                        <p>shares</p>
                    </li>
                    <div class="clearfix"></div>
                </ul>
            </div>
        </div>
        <div class="clearfix"> </div>
    </div>


    <!----------------------------------------------------------------------------------------->
    <div class="row-one widgettable">
        <div class="col-md-7 content-top-2 card">


            <div class="panel panel-primary">
                <div class="panel-heading">
                    Recent Reservations
                </div>
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>reservation No</th>
                                    <th>Full Name</th>
                                    <th>Email</th>
                                    <th>Date to Play</th>
                                    <th>Time to Play</th>
                                </tr>
                            </thead>
                            <tbody id="SetResList"></tbody>
                        </table>
                        <div class="text-right">
                            <a href="@Url.Action("Reservations","Admin")">More Tasks <i class="fa fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>


        </div>
        <div class="col-md-5 stat">

            <div class="panel panel-primary">
                <div class="panel-heading">
                    Recent Contact
                </div>
                <div class="panel-body">
                    <div class="list-group" id="AddRecentContact">

                    </div>
                    <div class="text-right">
                        <a href="@Url.Action("Contact","Admin")">More Tasks <i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
            </div>




        </div>
        <div class="clearfix"> </div>
    </div>
    <!--Contenu De la pge-->

</div>

<script>
    //
    //
    //
    //Count number of player
    $.get('/Admin/CountPlayer', null, CountPlayers);
    function CountPlayers(cntPly) {
        var setData = $('#cntPlayer');
        var Data = '<h5><strong>' + cntPly + '</strong></h5>'; 
        setData.append(Data);
    }

    //
    //
    //
    //Count Number of Contact
    $.get('/Admin/CountContact', null, CountContact);
    function CountContact(cntCnt) {
        var setData = $('#cntContact');
        var Data = '<h5><strong>' + cntCnt + '</strong></h5>';
        setData.append(Data);
    }

    //
    //
    //
    //Count Number of Stadium 
    $.get('/Admin/CountStadium', null, CountStadium);
    function CountStadium(cntStd) {
        var setData = $('#cntStadium');
        var Data = '<h5><strong>' + cntStd + '</strong></h5>';
        setData.append(Data);
    }

    //
    //
    //
    //Recent Players
    $.get('/Admin/GetPlyarsList', null, DataBind);

    function DataBind(playerList) {
        var setData = $('#SetPlayerList');
        for (var i = playerList.length - 1; i > playerList.length - 5; i--) {
            var Data = '<tr class="row_' + playerList[i].playerNo + '"><td>' +
                playerList[i].playerNo + '</td><td>' +
                playerList[i].names + '</td><td>' +
                playerList[i].emails + '</td><td>' +
                playerList[i].passwords + '</td><td>' +
                playerList[i].phone + '</td>' +
                '</tr>';
            setData.append(Data);
        }
    }

    //
    //
    //
    //Recent Reservation
    $.get('/Admin/GetReservationList', null, DataBindres);

    function DataBindres(resList) {
        var setData = $('#SetResList');
        for (var i = resList.length - 1; i > resList.length - 5; i--) {
            var Data = '<tr class="row_' + resList[i].reservationNo + '"><td>' +
                resList[i].reservationNo + '</td><td>' +
                resList[i].FullName + '</td><td>' +
                resList[i].Email + '</td><td>' +
                resList[i].reservationDate + '</td><td>' +
                resList[i].reservationTime + '</td>' +
                '</tr>';
            setData.append(Data);
        }
    }

    //
    //
    //
    //List of Recent Contact
    $.get('/Admin/GetContactList', null, DataBinds);
    
    function DataBinds(contactList) {
        var setData = $('#AddRecentContact');
        for (var i = contactList.length - 1; i > contactList.length - 5; i--) {
            var Data = '<div class="activity-row">' +
                    '<div class="col-xs-7 activity-desc" >' +
                        '<h5><a href="#">' + contactList[i].name + '</a></h5>' +
                        ' <p>' + contactList[i].allMessage +'</p>' +
                    '</div>' +
                    '<div class="clearfix"> </div>' +
                '</div>';
            setData.append(Data);
        }
    }
    
</script>